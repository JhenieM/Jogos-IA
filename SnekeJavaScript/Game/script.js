const canvas=document.getElementById("gameCanvas"),scoreSTElement=document.querySelector("#scoreST"),scoreGOElement=document.querySelector(".scoreGO");let bestScore=localStorage.getItem("bestScore")||0,score=0;const ctx=canvas.getContext("2d"),gridSize=20,snakeColor="green",foodColor="red";let snake=[{x:Math.floor(Math.random()*canvas.width/gridSize),y:Math.floor(Math.random()*canvas.height/gridSize)}],food={x:Math.floor(Math.random()*canvas.width/gridSize),y:Math.floor(Math.random()*canvas.height/gridSize)},dx=0,dy=0;function drawSnake(){snake.forEach(a=>{ctx.fillStyle=snakeColor,ctx.fillRect(a.x*gridSize,a.y*gridSize,gridSize,gridSize)})}function drawFood(){ctx.fillStyle=foodColor,ctx.fillRect(food.x*gridSize,food.y*gridSize,gridSize,gridSize)}function moveSnake(){const a={x:snake[0].x+dx,y:snake[0].y+dy};snake.unshift(a),a.x===food.x&&a.y===food.y?(score+=10,scoreSTElement.textContent="Score: "+score,scoreGOElement.textContent="Score: "+score,score>bestScore&&(bestScore=score,localStorage.setItem("bestScore",bestScore)),food={x:Math.floor(Math.random()*canvas.width/gridSize),y:Math.floor(Math.random()*canvas.height/gridSize)}):snake.pop()}function checkCollision(){const a=snake[0];if(0>a.x||a.x>=canvas.width/gridSize||0>a.y||a.y>=canvas.height/gridSize)return!0;for(let b=1;b<snake.length;b++)if(snake[b].x===a.x&&snake[b].y===a.y)return!0;return!1}function gameLoop(){return checkCollision()?(document.getElementById("containerGO").style.visibility="visible",void(document.getElementById("scoreST").style.color="transparent")):void(ctx.clearRect(0,0,canvas.width,canvas.height),drawSnake(),drawFood(),moveSnake(),setTimeout(gameLoop,100))}document.addEventListener("keydown",a=>{switch(a.key){case"ArrowUp":dx=0,dy=-1;break;case"ArrowDown":dx=0,dy=1;break;case"ArrowLeft":dx=-1,dy=0;break;case"ArrowRight":dx=1,dy=0;}});function loadRanking(){const a=document.querySelector(".best-score");a.textContent="Best Score: "+bestScore}loadRanking(),gameLoop();